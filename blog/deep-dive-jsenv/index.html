<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.75 'Atkinson Hyperlegible';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Atkinson Hyperlegible';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Atkinson Hyperlegible';font-weight:bold;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Atkinson Hyperlegible';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Atkinson Hyperlegible';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Atkinson Hyperlegible';font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Atkinson Hyperlegible';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Atkinson Hyperlegible';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:0rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:0.875rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-style:italic;border-left:0.4375rem solid hsla(0,0%,0%,0.8);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><style data-href="/styles.47922f7397924f0fa8f2.css" id="gatsby-global-css">pre::-webkit-scrollbar{height:15px;cursor:pointer}pre::-webkit-scrollbar-thumb{background:grey}pre code::-webkit-scrollbar-track-piece{background:none}pre[class*=language-]:after{display:block;position:absolute;top:0;left:0;background:#1a73e8;color:#fff;padding:.1em .3em}div.gatsby-highlight>pre.language-meta{padding:1em}pre.language-meta:after{display:none}pre.language-javascript:after{content:"javascript"}pre.language-jsx:after{content:"jsx"}pre.language-css:after{content:"css"}pre.language-html:after{content:"html"}pre.language-json:after{content:"json"}pre.language-console:after{content:"console"}pre.language-bash:after{content:"bash"}pre.language-plantumlcode:after{content:"plantumlcode"}code[class*=language-],pre[class*=language-]{text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#eee;background:#2f2f2f;font-family:Menlo,Roboto Mono,monospace;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#363636}:not(pre)>code[class*=language-]{white-space:normal;border-radius:.2em;padding:.3em .4em}pre[class*=language-]{overflow:auto;position:relative;margin:.5em 0;padding:3em 1em 1.25em}.language-css>code,.language-sass>code,.language-scss>code{color:#fd9170}[class*=language-] .namespace{opacity:.7}.token.atrule{color:#c792ea}.token.attr-name{color:#ffcb6b}.token.attr-value,.token.attribute{color:#a5e844}.token.boolean{color:#c792ea}.token.builtin{color:#ffcb6b}.token.cdata,.token.char{color:#80cbc4}.token.class{color:#ffcb6b}.token.class-name{color:#f2ff00}.token.comment{color:#616161}.token.constant{color:#c792ea}.token.deleted{color:#f66}.token.doctype{color:#616161}.token.entity{color:#f66}.token.function{color:#c792ea}.token.hexcode{color:#f2ff00}.token.id,.token.important{color:#c792ea;font-weight:700}.token.inserted{color:#80cbc4}.token.keyword{color:#c792ea}.token.number{color:#fd9170}.token.operator{color:#89ddff}.token.prolog{color:#616161}.token.property{color:#80cbc4}.token.pseudo-class,.token.pseudo-element{color:#a5e844}.token.punctuation{color:#89ddff}.token.regex{color:#f2ff00}.token.selector{color:#f66}.token.string{color:#a5e844}.token.symbol{color:#c792ea}.token.tag{color:#f66}.token.unit{color:#fd9170}.token.url,.token.variable{color:#f66}h1{font-size:1.75rem}a{text-decoration:none;color:#1a73e8;border-bottom:3px solid #1a73e8}li{margin-bottom:0}li :last-child{margin-bottom:1.5rem}.gatsby-highlight{box-shadow:5px 5px #1a73e8;margin-bottom:1.75rem}</style><meta name="generator" content="Gatsby 2.32.12"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=f6c52ce3c692eb61055427d9e84acf18" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#1a73e8"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=f6c52ce3c692eb61055427d9e84acf18"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=f6c52ce3c692eb61055427d9e84acf18"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=f6c52ce3c692eb61055427d9e84acf18"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=f6c52ce3c692eb61055427d9e84acf18"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=f6c52ce3c692eb61055427d9e84acf18"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=f6c52ce3c692eb61055427d9e84acf18"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=f6c52ce3c692eb61055427d9e84acf18"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=f6c52ce3c692eb61055427d9e84acf18"/><title data-react-helmet="true">JSEnv Deep Dive | uxdx.dev</title><meta data-react-helmet="true" name="description" content="JSEnv is a simple in-browser JavaScript playground. It automatically downloads dependencies from unpkg.com, it uses the WASM build of esbuild to bundle your code, and renders output to an iframe. Let&#x27;s talk about how it works."/><meta data-react-helmet="true" property="og:title" content="JSEnv Deep Dive"/><meta data-react-helmet="true" property="og:description" content="JSEnv is a simple in-browser JavaScript playground. It automatically downloads dependencies from unpkg.com, it uses the WASM build of esbuild to bundle your code, and renders output to an iframe. Let&#x27;s talk about how it works."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:image" content="https://uxdx.dev/static/24287146ffacd4f5605a480dfd294d17/94285/banner.jpg"/><meta data-react-helmet="true" name="author" content="Daithi Morton"/><meta data-react-helmet="true" name="keywords" content="blog,software,javascript,ux,dx,product development,tutorials,learning,teaching,deep dive,javascript,bundler,esbuild,wasm,playground"/><link href="//fonts.googleapis.com/css?family=Atkinson+Hyperlegible:400,500,700" rel="stylesheet" type="text/css"/><link as="script" rel="preload" href="/webpack-runtime-1596925805812bff1128.js"/><link as="script" rel="preload" href="/framework-8e528b732ab2eaadb7b7.js"/><link as="script" rel="preload" href="/styles-755093da0c07f4b49226.js"/><link as="script" rel="preload" href="/app-515c1d2f645bea33d60b.js"/><link as="script" rel="preload" href="/b79069689330af6ebec416d0224ba4ba1c9f1d46-54feeece3a0d49a7f66e.js"/><link as="script" rel="preload" href="/efb843684f5d054a3f031beebf163da3acfe6ec8-1fd8019fab9e4db010bd.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-js-bae8dc2dc1ce16295dd3.js"/><link as="fetch" rel="preload" href="/page-data/blog/deep-dive-jsenv/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3128451518.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3965681216.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4196972762.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header style="margin-left:auto;margin-right:auto;max-width:28rem;padding:0.875rem;display:flex;align-items:center"><div style="width:100%"><div style="display:flex;align-items:center"><div style="display:flex;flex-direction:column;margin-right:auto"><a style="text-decoration:none;color:inherit;border-bottom:none" href="/"><h1 style="margin-bottom:5px">David Morton</h1>Software engineer</a><div><a rel="noreferrer noopener" href="https://github.com/uxdxdev" target="_blank" style="margin:0 2px 0 2px">GitHub</a> <a rel="noreferrer noopener" href="https://www.linkedin.com/in/uxdx/" target="_blank" style="margin:0 2px 0 2px">LinkedIn</a> <a rel="noreferrer noopener" href="https://www.npmjs.com/~uxdx" target="_blank" style="margin:0 2px 0 2px">NPM</a> <a rel="noreferrer noopener" href="/jsenv" target="_blank" style="margin:0 2px 0 2px">JSEnv</a> <a rel="noreferrer noopener" href="/codingpractice" target="_blank" style="margin:0 2px 0 2px">Coding Practice</a> </div></div><a style="text-decoration:none;color:inherit;border-bottom:none" href="/"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:120px;height:120px;min-width:120px;border-radius:100%"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEEElEQVQ4y32Ua0zTZxTG+2XJYkx2zZItM0yyS5ii2xQh2wKZG1mCEmBYESqOQhHmFKJymdhyGRcZ6Ax3rIql0HLZshCWyhRkBJgQdCLlOi5bM74gWxC3YBxr+9vbfwGrkH3457zte87znvOc5xwZQzUsf/ZB/crZZq6GiUaYbICxWnE2YhP3NrN+xdc+KKxLvOOTrQIUTo5AfjEwfbWS2sJsStI1XK89C6MGCdw6UL0EtAQ6uAag88WlDARY24VCtvtF4O4t53UfOZ7vhqE+moql9SJMNUoVLAO5ViZzBZMuhmu436cjQh7Hs1t38dKOINx8QtjxQTge3nsICYzjp7pzMF4vVfI4qMz1h3VA2Ekj483lvLo9lKff9GeTTyBbfILY6BXEy17BvPDWbrx8FZjOnXbyatavztAV1OGQfiwJZYSSnvNZzJgKGas6SevJKKoORyIPiub5twN5zfsTbnxTJDI1PAK6kqHV0dWpek5nncDDJ5S/uirAIjo8Ijo8buSfrmLGcsO5nRlNjFyJbIMvFbkaEVPnbNLjgFIzRGCayC7jYILEpW2olof3Ncw252L5+gC6I/tx2xZK+6VCiSLrWhlKgJN1ZKSkUpCULPGz0KPlfq/WeTeiZ/ZaKbfzVVz7Yi9b39vLzcZiyc9qXqPLjrSx1FMmylAnHYOOAkoPx6NNiIfeYn6++CWfy6Mp/0zFlVQFwSFK7vVWiYdq1m6Ks2QDU5crMBXnY+spxph5nJasQ0LsF7h6Kpm8aCXfHVfQof4UXU6GJHKbq+QeZrikdsHbg/5ahurOSC8zWI3tplZYHaNF8dzKimSuIZUuTSQdpekS56tlI42bXhol+4BOcPItf7aWstBdJkbNiH3EKMANTJTE0acOY1LYlhMqpk1F0kTZ/0+H9iERfKePP/qvMNdZKQKMLPaUMG1Moy3zEF3qSMzpobTlJ7M4aFyaZf3ay8Fu1mG3tMP8BAu/9WExlTFvysFcEIP5KyX6xDh+SFPRkRpOe2XeI+WuPcvDoryZfmyzwwJ0jLaqMtpSwrHdqORu21nMOQo6RTNiw1SMXi53NsRlla0AStwJ8u0jDVhnBlicHYMHv3K3v5kzsQeZ1KuZ0SdzS6Pg6L5YMo4I0U87J+hfITXXpjiszCFKaf8J4rnTCXO9dDdp6W4sZL5TS5HQYoI8gl0BUcTtieL7NCWNJdncu14ljSpjhqXRXZaN4MKxOP/uu0SL7hTRKhXPbfHnmc3+5KUn0aTNQZOYQJw8jIrEA/j6BSBz34nn+yEUZqTw+4+VznmfqHNmWJ6tYX9MPJ5+oTz5xkfIXvFjvVhb6zzE2c2X9Zv8cffZzYZ3Pmad+P8J4fPUZofdiWyjHy9uC+DDYAVN53OlxP4DdSe6PMtn7C4AAAAASUVORK5CYII=" alt="David Morton" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms;margin-bottom:0;border-radius:50%"/><noscript><picture><source srcset="/static/f6c52ce3c692eb61055427d9e84acf18/35de9/profile_cropped.png 1x,
/static/f6c52ce3c692eb61055427d9e84acf18/91983/profile_cropped.png 1.5x,
/static/f6c52ce3c692eb61055427d9e84acf18/ed1d1/profile_cropped.png 2x" /><img loading="lazy" width="120" height="120" srcset="/static/f6c52ce3c692eb61055427d9e84acf18/35de9/profile_cropped.png 1x,
/static/f6c52ce3c692eb61055427d9e84acf18/91983/profile_cropped.png 1.5x,
/static/f6c52ce3c692eb61055427d9e84acf18/ed1d1/profile_cropped.png 2x" src="/static/f6c52ce3c692eb61055427d9e84acf18/35de9/profile_cropped.png" alt="David Morton" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a></div></div></header><div style="margin:1.75rem auto;max-width:52.5rem;padding:0.875rem"><div style="text-align:center"><h2>JSEnv Deep Dive</h2><p style="display:block;margin-bottom:1.75rem;margin-top:-0.875rem">☕ <!-- -->1<!-- --> min read</p></div><div><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:66.66666666666667%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEA//EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAZpMmFyYT//EABoQAAMBAAMAAAAAAAAAAAAAAAABAhEDIjL/2gAIAQEAAQUCvloXerTlnk3T/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAEDAQE/AV2f/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Bh//EABoQAAMAAwEAAAAAAAAAAAAAAAABIQIQEjH/2gAIAQEABj8CXTIy5anpT//EABkQAQEBAQEBAAAAAAAAAAAAAAERACExUf/aAAgBAQABPyF9ATzuPWTe6BBcGsWz6uUqld//2gAMAwEAAgADAAAAEIgP/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8QKP/EABYRAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxASv//EABwQAQACAwADAAAAAAAAAAAAAAEAESExQWGBof/aAAgBAQABPxBsQFgBn1Ezbsk01d6lxaBvOPGoWql7BXFPkZOXVn//2Q==" alt="Broadcast engineer maintains camera circuitry" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/24287146ffacd4f5605a480dfd294d17/49df2/banner.jpg 180w,
/static/24287146ffacd4f5605a480dfd294d17/6580d/banner.jpg 360w,
/static/24287146ffacd4f5605a480dfd294d17/94285/banner.jpg 720w,
/static/24287146ffacd4f5605a480dfd294d17/1920d/banner.jpg 1080w,
/static/24287146ffacd4f5605a480dfd294d17/c4b07/banner.jpg 1440w,
/static/24287146ffacd4f5605a480dfd294d17/097fa/banner.jpg 1920w" sizes="(max-width: 720px) 100vw, 720px" /><img loading="lazy" sizes="(max-width: 720px) 100vw, 720px" srcset="/static/24287146ffacd4f5605a480dfd294d17/49df2/banner.jpg 180w,
/static/24287146ffacd4f5605a480dfd294d17/6580d/banner.jpg 360w,
/static/24287146ffacd4f5605a480dfd294d17/94285/banner.jpg 720w,
/static/24287146ffacd4f5605a480dfd294d17/1920d/banner.jpg 1080w,
/static/24287146ffacd4f5605a480dfd294d17/c4b07/banner.jpg 1440w,
/static/24287146ffacd4f5605a480dfd294d17/097fa/banner.jpg 1920w" src="/static/24287146ffacd4f5605a480dfd294d17/94285/banner.jpg" alt="Broadcast engineer maintains camera circuitry" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><a rel="noreferrer noopener" href="https://unsplash.com/photos/person-holding-green-and-black-circuit-board-32PpagSzeGs" target="_blank" style="margin:0 2px 0 2px">Photo by ThisisEngineering RAEng</a></div><br/><blockquote><p>JSEnv is a simple in-browser JavaScript playground. It automatically downloads dependencies from unpkg.com, it uses the WASM build of esbuild to bundle your code, and renders output to an iframe. Let’s talk about how it works.</p></blockquote><p>In this post I’m going to document a deep dive into how the JSEnv project works. We’ll talk about the Monaco editors configuration. Then we’ll take a look at <code class="language-text">esbuild WASM</code> and the plugins written to fetch code dependencies and resolve modules during the bundling phase. Finally we’ll see how the output is rendered in an iframe and console output shown to the user.</p><p>JSEnv is deployed as a static site to GitHub pages and can be accessed from the URL <a href="https://uxdx.dev/jsenv/" target="_blank" rel="noreferrer noopener">https://uxdx.dev/jsenv/</a>. It runs entirely in the browser, downloads code dependencies from unpkg.com, bundles them using esbuild WASM, and posts the results to an iframe for rendering using <code class="language-text">eval()</code>.</p><h2>Flowchart</h2><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1280px">
      <a class="gatsby-resp-image-link" href="/static/634a01422145d8a52ec34f820d572700/d8c39/jsenv-flowchart.jpg" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:34.6875%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAdkSUU//xAAYEAACAwAAAAAAAAAAAAAAAAAAAREhMf/aAAgBAQABBQJ0tIP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwFn/8QAFhABAQEAAAAAAAAAAAAAAAAAMQAQ/9oACAEBAAY/Amc//8QAGhAAAQUBAAAAAAAAAAAAAAAAAAERMUFxof/aAAgBAQABPyGwoeA3w//aAAwDAQACAAMAAAAQjB//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQMBAT8QW1v/xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QWJP/xAAaEAEBAAIDAAAAAAAAAAAAAAABEQAhMUFR/9oACAEBAAE/EAKynK7wOpD1CYItKvuP/9k=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="flowchart of the overall jsenv project" title="flowchart of the overall jsenv project" src="/static/634a01422145d8a52ec34f820d572700/eea4a/jsenv-flowchart.jpg" srcSet="/static/634a01422145d8a52ec34f820d572700/cb69c/jsenv-flowchart.jpg 320w,/static/634a01422145d8a52ec34f820d572700/c08c5/jsenv-flowchart.jpg 640w,/static/634a01422145d8a52ec34f820d572700/eea4a/jsenv-flowchart.jpg 1280w,/static/634a01422145d8a52ec34f820d572700/0f98f/jsenv-flowchart.jpg 1920w,/static/634a01422145d8a52ec34f820d572700/8ec0a/jsenv-flowchart.jpg 2560w,/static/634a01422145d8a52ec34f820d572700/d8c39/jsenv-flowchart.jpg 3664w" sizes="(max-width: 1280px) 100vw, 1280px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p><p>This flowchart shows how user code moves through the system and is rendered in the preview iframe. There are 3 main phases in this project; getting the users code, resolving dependencies and bundling, and rendering the output.</p><h2>Monaco editor</h2><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1280px">
      <a class="gatsby-resp-image-link" href="/static/789ac21ae5bb7a8824816ff2f2f4641b/c06f5/monaco-editor.jpg" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:29.062500000000004%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHakzKB/8QAFxABAQEBAAAAAAAAAAAAAAAAAAERMf/aAAgBAQABBQKSuNf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwFn/8QAFRABAQAAAAAAAAAAAAAAAAAAEDH/2gAIAQEABj8Cr//EABsQAAICAwEAAAAAAAAAAAAAAAARAVEhMUGB/9oACAEBAAE/IYCb+G1zZ1g//9oADAMBAAIAAwAAABAP/wD/xAAXEQEAAwAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/EJxb/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAgEBPxB4chb/xAAaEAEBAQADAQAAAAAAAAAAAAABEQAhMVFh/9oACAEBAAE/EAKmBWC/YYV1CYNyl8wlEcM73//Z&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="flowchart image of monaco editor flow" title="flowchart image of monaco editor flow" src="/static/789ac21ae5bb7a8824816ff2f2f4641b/eea4a/monaco-editor.jpg" srcSet="/static/789ac21ae5bb7a8824816ff2f2f4641b/cb69c/monaco-editor.jpg 320w,/static/789ac21ae5bb7a8824816ff2f2f4641b/c08c5/monaco-editor.jpg 640w,/static/789ac21ae5bb7a8824816ff2f2f4641b/eea4a/monaco-editor.jpg 1280w,/static/789ac21ae5bb7a8824816ff2f2f4641b/c06f5/monaco-editor.jpg 1668w" sizes="(max-width: 1280px) 100vw, 1280px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p><p>Monaco editor is a browser based code editor. I’m using this in it’s most basic form to allow users to enter JavaScript code which will then be sent to the bundler automatically after 2000ms of no activity, i.e. debounce. The editors configuration is below.</p><div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MonacoEditor</span></span>
  <span class="token attr-name">editorDidMount</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onEditorDidMount<span class="token punctuation">}</span></span>
  <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>initialValue<span class="token punctuation">}</span></span>
  <span class="token attr-name">theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dark<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">options</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
    wordWrap<span class="token operator">:</span> <span class="token string">&quot;on&quot;</span><span class="token punctuation">,</span>
    minimap<span class="token operator">:</span> <span class="token punctuation">{</span> enabled<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    showUnused<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    folding<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    lineNumbersMinChars<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    fontSize<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
    scrollBeyondLastLine<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    automaticLayout<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="token punctuation">/&gt;</span></span></code></pre></div><p>The <code class="language-text">onEditorDidMount</code> function initialises the editor with hooks for our React state to capture the editor content. It also uses the <code class="language-text">monaco-jsx-highlighter</code> module with the <code class="language-text">codeShift</code> module to highlight JSX syntax in the editor. </p><p>The other options are for basic editor customisations to provide a nice UX for the user while they are writing they’re JavaScript.</p><p>Monaco editor integration code can be viewed <a href="https://github.com/uxdxdev/jsenv/blob/main/src/components/code-editor.tsx" target="_blank" rel="noreferrer noopener">here on GitHub </a></p><p>The editor content is sent to the esbuild WASM bundler so it can be processed to resolve dependencies and finally is sent to the preview iframe for rendering.</p><h2>esbuild WASM bundler</h2><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1280px">
      <a class="gatsby-resp-image-link" href="/static/c11f9a4e0d347f5a59f616f46d58febd/d2b5b/esbuild-WASM-bundler.jpg" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:25.937500000000004%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdmQsD//xAAWEAEBAQAAAAAAAAAAAAAAAAARARD/2gAIAQEAAQUCKlz/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAEDEyof/aAAgBAQAGPwK2Er//xAAZEAEAAwEBAAAAAAAAAAAAAAABACExEUH/2gAIAQEAAT8hvOHDxApBC3s//9oADAMBAAIAAwAAABCAD//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/EIf/xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QwZ//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAhQVH/2gAIAQEAAT8QvV4FKmh7Cjc20RnIpO9Sn//Z&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="flowchart of the esbuild wasm bundler flow" title="flowchart of the esbuild wasm bundler flow" src="/static/c11f9a4e0d347f5a59f616f46d58febd/eea4a/esbuild-WASM-bundler.jpg" srcSet="/static/c11f9a4e0d347f5a59f616f46d58febd/cb69c/esbuild-WASM-bundler.jpg 320w,/static/c11f9a4e0d347f5a59f616f46d58febd/c08c5/esbuild-WASM-bundler.jpg 640w,/static/c11f9a4e0d347f5a59f616f46d58febd/eea4a/esbuild-WASM-bundler.jpg 1280w,/static/c11f9a4e0d347f5a59f616f46d58febd/d2b5b/esbuild-WASM-bundler.jpg 1387w" sizes="(max-width: 1280px) 100vw, 1280px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p><div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> <span class="token function-variable function">bundle</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">rawCode<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>service<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    service <span class="token operator">=</span> <span class="token keyword">await</span> esbuild<span class="token punctuation">.</span><span class="token function">startService</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      worker<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      wasmURL<span class="token operator">:</span> <span class="token string">&#x27;https://unpkg.com/esbuild-wasm@0.8.27/esbuild.wasm&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> service<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      entryPoints<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;index.js&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      bundle<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      write<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">unpkgPathPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fetchPlugin</span><span class="token punctuation">(</span>rawCode<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      define<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&#x27;process.env.NODE_ENV&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;&quot;production&quot;&#x27;</span><span class="token punctuation">,</span>
        global<span class="token operator">:</span> <span class="token string">&#x27;window&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      code<span class="token operator">:</span> result<span class="token punctuation">.</span>outputFiles<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text<span class="token punctuation">,</span>
      err<span class="token operator">:</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token keyword">instanceof</span> <span class="token class-name">Error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        code<span class="token operator">:</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span>
        err<span class="token operator">:</span> err<span class="token punctuation">.</span>message<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><h3>unpkgPathPlugin</h3><div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">unpkgPathPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;unpkg-path-plugin&quot;</span><span class="token punctuation">,</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">build<span class="token operator">:</span> esbuild<span class="token punctuation">.</span>PluginBuild</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Handle root entry file of &#x27;index.js&#x27;</span>
      build<span class="token punctuation">.</span><span class="token function">onResolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> filter<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^index\.js$)</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span> <span class="token keyword">namespace</span><span class="token operator">:</span> <span class="token string">&quot;a&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Handle relative paths in a module</span>
      build<span class="token punctuation">.</span><span class="token function">onResolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> filter<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\.+\/</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token keyword">namespace</span><span class="token operator">:</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span>
          path<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token string">&quot;https://unpkg.com&quot;</span> <span class="token operator">+</span> args<span class="token punctuation">.</span>resolveDir <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>href<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Handle main file of a module</span>
      build<span class="token punctuation">.</span><span class="token function">onResolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> filter<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token keyword">namespace</span><span class="token operator">:</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span>
          path<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://unpkg.com/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>args<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><h3>fetchPlugin</h3><div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">fetchPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">inputCode<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#x27;fetch-plugin&#x27;</span><span class="token punctuation">,</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">build<span class="token operator">:</span> esbuild<span class="token punctuation">.</span>PluginBuild</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      build<span class="token punctuation">.</span><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">{</span> filter<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^index\.js$)</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&#x27;jsx&#x27;</span><span class="token punctuation">,</span>
          contents<span class="token operator">:</span> inputCode<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      build<span class="token punctuation">.</span><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">{</span> filter<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> cachedResult <span class="token operator">=</span> <span class="token keyword">await</span> fileCache<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">getItem</span><span class="token generic class-name"><span class="token operator">&lt;</span>esbuild<span class="token punctuation">.</span>OnLoadResult<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
          args<span class="token punctuation">.</span>path
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>cachedResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> cachedResult<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      build<span class="token punctuation">.</span><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">{</span> filter<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.css$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> request <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> escaped <span class="token operator">=</span> data
          <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\n</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&quot;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#x27;\\&quot;&#x27;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&#x27;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;\\&#x27;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> contents <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
          const style = document.createElement(&#x27;style&#x27;);
          style.innerText = &#x27;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>escaped<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#x27;;
          document.head.appendChild(style);
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> result<span class="token operator">:</span> esbuild<span class="token punctuation">.</span>OnLoadResult <span class="token operator">=</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&#x27;jsx&#x27;</span><span class="token punctuation">,</span>
          contents<span class="token punctuation">,</span>
          resolveDir<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span><span class="token string">&#x27;./&#x27;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>responseURL<span class="token punctuation">)</span><span class="token punctuation">.</span>pathname<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> fileCache<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>path<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      build<span class="token punctuation">.</span><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">{</span> filter<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> request <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> result<span class="token operator">:</span> esbuild<span class="token punctuation">.</span>OnLoadResult <span class="token operator">=</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&#x27;jsx&#x27;</span><span class="token punctuation">,</span>
          contents<span class="token operator">:</span> data<span class="token punctuation">,</span>
          resolveDir<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span><span class="token string">&#x27;./&#x27;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>responseURL<span class="token punctuation">)</span><span class="token punctuation">.</span>pathname<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> fileCache<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>path<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><h2>Preview iframe</h2><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1197px">
      <a class="gatsby-resp-image-link" href="/static/2bf57a9ed530f00c3f39011a8ebf8367/8a29d/preview-iframe.jpg" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:56.25%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHrPSBlB//EABgQAAMBAQAAAAAAAAAAAAAAAAECEQAS/9oACAEBAAEFAq1NyTnKoCgTf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABsQAAICAwEAAAAAAAAAAAAAABEhAAEQIjFR/9oACAEBAAY/Ar1Hj7GqHTNbNYAUSn//xAAcEAEAAgMAAwAAAAAAAAAAAAABABEhMUFhcaH/2gAIAQEAAT8hxjQbUhaHq4T6Cu4liOmU76HMA0AeJ//aAAwDAQACAAMAAAAQu8//xAAYEQACAwAAAAAAAAAAAAAAAAAAAREhgf/aAAgBAwEBPxDR25P/xAAXEQADAQAAAAAAAAAAAAAAAAAAATER/9oACAECAQE/EFlZIf/EAB0QAQEBAAEFAQAAAAAAAAAAAAERADEhQWFxkeH/2gAIAQEAAT8QsbdyXx21RaJmK3Tco/rxGqCO5ulqNX3vFeBDf//Z&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="image of flowchart showing preview iframe flow" title="image of flowchart showing preview iframe flow" src="/static/2bf57a9ed530f00c3f39011a8ebf8367/8a29d/preview-iframe.jpg" srcSet="/static/2bf57a9ed530f00c3f39011a8ebf8367/cb69c/preview-iframe.jpg 320w,/static/2bf57a9ed530f00c3f39011a8ebf8367/c08c5/preview-iframe.jpg 640w,/static/2bf57a9ed530f00c3f39011a8ebf8367/8a29d/preview-iframe.jpg 1197w" sizes="(max-width: 1197px) 100vw, 1197px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p><div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
      <span class="token selector">html, body, #root</span><span class="token punctuation">{</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      ...
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading-text-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lds-ripple<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">const</span> <span class="token function-variable function">out</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>            
        window<span class="token punctuation">.</span>top<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> origin<span class="token operator">:</span> <span class="token string">&#x27;preview&#x27;</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> message<span class="token operator">:</span> str <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;*&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      window<span class="token punctuation">.</span>console <span class="token operator">=</span> <span class="token punctuation">{</span>
          log<span class="token operator">:</span> <span class="token function">out</span><span class="token punctuation">(</span><span class="token string">&#x27;log&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          error<span class="token operator">:</span> <span class="token function">out</span><span class="token punctuation">(</span><span class="token string">&#x27;error&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          info<span class="token operator">:</span> <span class="token function">out</span><span class="token punctuation">(</span><span class="token string">&#x27;info&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          warn<span class="token operator">:</span> <span class="token function">out</span><span class="token punctuation">(</span><span class="token string">&#x27;warn&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          clear<span class="token operator">:</span> <span class="token function">out</span><span class="token punctuation">(</span><span class="token string">&#x27;clear&#x27;</span><span class="token punctuation">)</span>     
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token keyword">const</span> <span class="token function-variable function">handleError</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#x27;#root&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        root<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#x27;&lt;div style=&quot;color: red;&quot;&gt;&lt;h4&gt;Runtime Error&lt;/h4&gt;&#x27;</span> <span class="token operator">+</span> err <span class="token operator">+</span> <span class="token string">&#x27;&lt;/div&gt;&#x27;</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;error&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">handleError</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;message&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token function">eval</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>          
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">handleError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre></div><h2>Share this post</h2><div><button aria-label="linkedin" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="email" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#7f7f7f"></circle><path d="M17,22v20h30V22H17z M41.1,25L32,32.1L22.9,25H41.1z M20,39V26.6l12,9.3l12-9.3V39H20z" fill="white"></path></svg></button></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-63312977-12', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/deep-dive-jsenv/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c38cd845a4181427323c.js"],"app":["/app-515c1d2f645bea33d60b.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-b0556ce5127c1a3e2490.js"],"component---src-pages-404-js":["/component---src-pages-404-js-c10d5c8bf6e48b1a78ac.js"],"component---src-pages-index-js":["/component---src-pages-index-js-2da69e0e831592d55f7c.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-bae8dc2dc1ce16295dd3.js"]};/*]]>*/</script><script src="/polyfill-c38cd845a4181427323c.js" nomodule=""></script><script src="/component---src-templates-post-template-js-bae8dc2dc1ce16295dd3.js" async=""></script><script src="/efb843684f5d054a3f031beebf163da3acfe6ec8-1fd8019fab9e4db010bd.js" async=""></script><script src="/b79069689330af6ebec416d0224ba4ba1c9f1d46-54feeece3a0d49a7f66e.js" async=""></script><script src="/app-515c1d2f645bea33d60b.js" async=""></script><script src="/styles-755093da0c07f4b49226.js" async=""></script><script src="/framework-8e528b732ab2eaadb7b7.js" async=""></script><script src="/webpack-runtime-1596925805812bff1128.js" async=""></script></body></html>